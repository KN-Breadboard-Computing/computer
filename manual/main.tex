\documentclass[a4paper]{article}
\usepackage[top=3cm, bottom=3cm, left = 2cm, right = 2cm]{geometry} 
\geometry{a4paper} 
\usepackage[utf8]{inputenc}
\usepackage{textcomp}
\usepackage{graphicx} 
\usepackage{amsmath,amssymb}  
\usepackage{bm}  
\usepackage{enumitem}
\usepackage{tabularx}
\usepackage{array}
\usepackage[pdftex,bookmarks,colorlinks,breaklinks]{hyperref}  
\hypersetup{linkcolor=black,citecolor=black,filecolor=black,urlcolor=black} 
\usepackage{memhfixc} 
\usepackage{pdfsync}  
\usepackage{fancyhdr}
\pagestyle{fancy}

\setlist[itemize,1]{label=$\diamond$}
\setlist[itemize,2]{label=$\times$}

\renewcommand{\arraystretch}{1.5}
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}
\newcolumntype{Y}{>{\centering\arraybackslash}X}

\title{8-Bit CPU Manual}
\author{Breadboard Computing}
\date{}

\begin{document}
\maketitle

%\begin{figure}[h]
%    \centering
%    \includegraphics[width=0.5\textwidth]{logo.png}
%\end{figure}

\pagebreak

\tableofcontents

\pagebreak

\section{Overview}

\pagebreak

\section{Processor Architecture}

\subsection{Registers:}
\begin{itemize}
    \item A Register: \texttt{REG\_A\_0}, \texttt{REG\_A\_1}, \dots, \texttt{REG\_A\_7}
    \item B Register: \texttt{REG\_B\_0}, \texttt{REG\_B\_1}, \dots, \texttt{REG\_B\_7}
    \item Temporary Register: \texttt{REG\_TMP\_00}, \texttt{REG\_TMP\_01}, \dots, \texttt{REG\_TMP\_15}
    \item Memory Address Register: \texttt{REG\_MAR\_00}, \texttt{REG\_MAR\_01}, \dots, \texttt{REG\_MAR\_15}
    \item Memory Buffer Register: \texttt{REG\_MBR\_0}, \texttt{REG\_MBR\_1}, \dots, \texttt{REG\_MBR\_7}
    \item Flag Register:  \texttt{REG\_F\_0}, \texttt{REG\_F\_1}, \dots, \texttt{REG\_F\_7}
    \item Instruction Register: \texttt{REG\_IR\_0}, \texttt{REG\_IR\_1}, \dots, \texttt{REG\_IR\_7}
\end{itemize}

\subsection{Buses}
\begin{itemize}
    \item Data Bus: \texttt{BUS\_0}, \texttt{BUS\_1}, \dots, \texttt{BUS\_7}
    \item Address Bus: \texttt{ADDRESS\_00}, \texttt{ADDRESS\_01}, \dots, \texttt{ADDRESS\_15}
\end{itemize}

\pagebreak

\subsection{Flags}
\begin{itemize}
  \item \texttt{REG\_F\_0}: sign flag(1 $\rightarrow$ result is negative; 0 $\rightarrow$ result is non-negative)
  \item \texttt{REG\_F\_1}: parity flag(1 $\rightarrow$ result is odd; 0 $\rightarrow$ result is even)
  \item \texttt{REG\_F\_2}: zero flag(1 $\rightarrow$ result is not equal to zero; 0 $\rightarrow$ result is equal to zero)
  \item \texttt{REG\_F\_3}: carry flag(for unsigned number operations: 1 $\rightarrow$ result is out of range; 0 $\rightarrow$ result is correct)
  \item \texttt{REG\_F\_4}: overflow flag(for signed number operations: 1 $\rightarrow$ result is out of range; 0 $\rightarrow$ result is correct)
\end{itemize}

\subsection{Signals}
\begin{table}[ht!]
  \begin{tabularx}{\textwidth}{|M{3.5cm}|M{1cm}|m{8cm}|Y|}
  \hline
  \multicolumn{4}{|c|}{\textbf{Clock}} \\
  \hline
  \texttt{CLK} &  & signal generated by clock  with specified frequency & \\ 
  \hline 
  $\overline{\texttt{CLK}}$ &  & inverted signal generated by clock  with specified frequency & \\
  \hline
  \end{tabularx}
  \caption{Clock Signals Description}
\end{table}

\begin{table}[ht!]
  \begin{tabularx}{\textwidth}{|M{3.5cm}|M{1cm}|m{8cm}|Y|}
  \hline
  \multicolumn{4}{|c|}{\textbf{Arithmetic Logic Unit}} \\
  \hline
  \texttt{REG\_A\_LOAD} & A0 & load data from data bus to register A & combined with \texttt{CLK} \\
  \hline
  \texttt{REG\_B\_LOAD} & A1 & load data from data bus to register B & combined with \texttt{CLK} \\
  \hline
  \texttt{ALU\_OPC\_0} & A2 & bit 0 of operation code to perform & \\
  \hline
  \texttt{ALU\_OPC\_1} & A3 & bit 1 of operation code to perform & \\
  \hline
  \texttt{ALU\_OPC\_2} & A4 & bit 2 of operation code to perform & \\
  \hline
  \texttt{ALU\_OPC\_3} & A5 & bit 3 of operation code to perform & \\
  \hline
  \texttt{ALU\_OPC\_4} & A6 & bit 4 of operation code to perform & \\
  \hline
  \texttt{REG\_F\_LOAD} & A7 & load flags of current operation to flag register & combined with \texttt{CLK} \\
  \hline
  $\overline{\texttt{REG\_F\_OUT}}$ & B0 & pass data from flag register to data bus & \\
  \hline
  $\overline{\texttt{ALU\_OUT}}$ & B1 & pass current operation result to data bus & \\
  \hline
  \end{tabularx}
  \caption{Arithmetic Logic Unit Signals Description}
\end{table}

\begin{table}[ht!]
  \begin{tabularx}{\textwidth}{|M{3.5cm}|M{1cm}|m{8cm}|Y|}
  \hline
  \multicolumn{4}{|c|}{\textbf{Data Bus - Address Bus Connector}} \\
  \hline
  \texttt{REG\_TMPH\_LOAD} & B2 & load data from data/address bus to higher bits of temporary register & combined with \texttt{CLK} \\
  \hline
  \texttt{REG\_TMPL\_LOAD} & B3 & load data from data/address bus to lower bits of temporary register &  combined with \texttt{CLK} \\
  \hline
  $\overline{\texttt{REG\_TMPH\_OUT}}$ & B4 & pass data from higher bits of temporary register to data/address bus & \\
  \hline
  $\overline{\texttt{REG\_TMPL\_OUT}}$ & B5 & pass data from lower bits of temporary register to data/address bus & \\
  \hline
  $\overline{\texttt{REG\_TMP\_PASS\_ADDRESS}}$ & B6 & enable passing address from address bus/temporary register to temporary register/address bus & \\
  \hline
  $\overline{\texttt{REG\_TMPH\_PASS\_DATA}}$ & B7 & enable passing data from data bus/msb of temporary register to msb of temporary register/data bus  & \\
  \hline
  $\overline{\texttt{REG\_TMPL\_PASS\_DATA}}$ & C0 & enable passing data from data bus/lsb of temporary register to lsb of temporary register/data bus  & \\
  \hline
  \texttt{REG\_TMP\_ADDRESS\_DIR} & C1 & address direction selector: from address bus/temporary register to temporary register/address bus  & \\
  \hline
  \texttt{REG\_TMPH\_DATA\_DIR} & C2 & data flow direction selector: from data bus/msb of temporary register to msb of temporary register/data bus & \\
  \hline
  \texttt{REG\_TMPL\_DATA\_DIR} & C3 & data flow direction selector: from data bus/lsb of temporary register to lsb temporary register/data bus & \\
  \hline
  \end{tabularx}
  \caption{Data Bus - Address Bus Connector Signals Description}
\end{table}

\begin{table}[ht!]
  \begin{tabularx}{\textwidth}{|M{3.5cm}|M{1cm}|m{8cm}|Y|}
  \hline
  \multicolumn{4}{|c|}{\textbf{Program Counter}} \\
  \hline
  $\overline{\texttt{PC\_LOAD}}$ & C4 & load address from address bus to program counter & \\
  \hline
  $\overline{\texttt{PC\_RST}}$ & C5 & set program counter to 0x0000 & \\
  \hline
  \texttt{PC\_TICK} & C6 & increment program counter & combined with $\overline{\texttt{CLK}}$ \\
  \hline
  $\overline{\texttt{PC\_OUT}}$ & C7 & pass data from program counter to address bus & \\
  \hline
  \end{tabularx}
  \caption{Program Counter Signals Description}
\end{table}

\begin{table}[ht!]
  \begin{tabularx}{\textwidth}{|M{3.5cm}|M{1cm}|m{8cm}|Y|}
  \hline
  \multicolumn{4}{|c|}{\textbf{Stack Counter}} \\
  \hline
  $\overline{\texttt{STC\_LOAD}}$ & D0 & load address from address bus to stack counter & \\
  \hline
  \texttt{STC\_RST} & D1 & set stack counter to 0x0000 & \\
  \hline
  \texttt{STC\_TICK} & D2 & increment/decrement stack counter; increment/decrement depends on mode & combined with $\overline{\texttt{CLK}}$ \\
  \hline
  \texttt{STC\_MODE} & D3 & stack counter operation selector: increment or decrement & \\
  \hline
  $\overline{\texttt{STC\_OUT}}$ & D4 & pass data from stack counter to address bus & \\
  \hline
  \end{tabularx}
  \caption{Stack Counter Signals Description}
\end{table}

\begin{table}[ht!]
  \begin{tabularx}{\textwidth}{|M{3.5cm}|M{1cm}|m{8cm}|Y|}
  \hline
  \multicolumn{4}{|c|}{\textbf{Memory Unit}} \\
  \hline
  \texttt{REG\_MAR\_LOAD} & D5 & load data from address bus to memory address register & combined with \texttt{CLK} \\
  \hline
  \texttt{REG\_MBR\_LOAD} & D6 & load data from data bus to memory buffer register & combined with \texttt{CLK} \\
  \hline
  $\overline{\texttt{MEM\_OUT}}$ & D7 & read data to memory buffer register from memory at address from memory address register & \\
  \hline
  $\overline{\texttt{MEM\_IN}}$ & E0 & write data from memory buffer register to memory at address from memory address register & \\
  \hline
  \texttt{MEM\_PART} & E1 & additional bit of memory address; it is used to easy memory division & \\
  \hline
  $\overline{\texttt{ZERO\_PAGE}}$ & E2 & clear higher bits of memory address; it is used to faster access to memory at low addresses & \\
  \hline
  \texttt{REG\_MBR\_WORD\_DIR} & E3 & data flow direction selector: pass data from data bus/memory buffer register to memory buffer register/data bus & \\
  \hline
  $\overline{\texttt{REG\_MAR\_USE\_BTTNS}}$ & E4 & use buttons to enter value to set to memory address register & \\
  \hline
  $\overline{\texttt{REG\_MBR\_USE\_BTTNS}}$ & E5 & use buttons to enter value to set to memory buffer register & \\
  \hline
  $\overline{\texttt{REG\_MBR\_USE\_BUS}}$ & E6 & use bus to pass value to set to memory buffer register or get value from memory buffer register & \\
  \hline
  \end{tabularx}
  \caption{Memory Unit Signals Description}
\end{table}

\begin{table}[ht!]
  \begin{tabularx}{\textwidth}{|M{3.5cm}|M{1cm}|m{8cm}|Y|}
  \hline
  \multicolumn{4}{|c|}{\textbf{Control Unit}} \\
  \hline
  \texttt{REG\_IR\_LOAD} & F0 & load instruction from data bus & combined with $\overline{\texttt{CLK}}$  \\
  \hline
  \texttt{MCC\_TICK} & F1 & increment microcode counter & combined with $\overline{\texttt{CLK}}$  \\
  \hline
  $\overline{\texttt{MCC\_RST}}$ & F2 & set microcode counter to 0x0000 & \\
  \hline
  \end{tabularx}
  \caption{Control Unit Signals Description}
\end{table}

\pagebreak

\subsection{Instructions}

\subsection{Instruction Cycle}
\begin{itemize}
    \item Fetch(fixed number of cycles)
    \item Decode(variable number of cycles)
    \item Execute(variable number of cycles)
\end{itemize}

\subsection{Decoder}
Input: \texttt{$MI_7I_6I_5I_4I_3I_2I_1I_0C_3C_2C_1C_0$}:
\begin{itemize}
    \item \texttt{$M$} - operating mode, 
    \item \texttt{$I_7I_6I_5I_4I_3I_2I_1I_0$} - instruction, 
    \item \texttt{$C_3C_2C_1C_0$} - microcode counter
\end{itemize}

\pagebreak

%\bibliographystyle{abbrv}
%\bibliography{references}  % need to put bibtex references in references.bib 

\end{document}